/*!CK:2323011492!*//*1440391048,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["SFMRm"]); }

__d('SaveCaretMenuItem',['Banzai','CSS','DOM','EntstreamFeedObject','EntstreamFeedObjectFollowup','Event','MenuItem','SaveState','SaveStateHandler','cx','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u='saved_for_later:caret_action',v='imp';s=babelHelpers.inherits(w,n);t=s&&s.prototype;function w(x){'use strict';t.constructor.call(this,x);this._data=this._updateData();this.getRoot();m.listen(this._anchor,'error',this.handleError.bind(this));p.listen(x.primarysaveid,(function(y){this._data=this._updateData();this._doRender(y);}).bind(this));}w.prototype.handleClick=function(){'use strict';var x=t.handleClick.call(this),y=k.getRoot(r(this._data.storydomid));if(this._data.isSaveAction){p.saving(this._data.allsaveids);y&&l.addFollowup(y,this._data.savefollowupmarkup,["_521o","_4-u3","_3yll"]);}else{p.unsaving(this._data.allsaveids);var z=l.getFollowup(y);z&&l.removeFollowup(y);}return x;};w.prototype.handleError=function(){'use strict';if(this._data.isSaveAction){p.saved(this._data.allsaveids);}else p.unsaved(this._data.allsaveids);};w.prototype._updateData=function(){'use strict';var x=babelHelpers._extends({},this._data);x.isSaveAction=p.isSaveAction(x.primarysaveid);if(x.isSaveAction){x.markup=x.savemarkup;x.ajaxify=x.saveajaxify;x.title=x.savetitle;}else{x.markup=x.unsavemarkup;x.ajaxify=x.unsaveajaxify;x.title=x.unsavetitle;}return x;};w.prototype._doRender=function(x){'use strict';if(!this._root)return;switch(x){case o.SAVING:case o.UNSAVING:i.addClass(this._root,"_5arm");setTimeout(this.disable.bind(this),10);break;case o.SAVED:case o.UNSAVED:i.removeClass(this._root,"_5arm");setTimeout(this.enable.bind(this),10);break;}j.replace(this._anchor,this._renderItemContent());m.listen(this._anchor,'error',this.handleError.bind(this));};w.prototype.onShow=function(){'use strict';var x=this._data.logdata;h.post(u,{action:v,surface:x.surface,story_id:x.story_id,is_save:this._data.isSaveAction});};f.exports=w;},null);
__d('FbFeedOptionsExpander',['BanzaiLogger','CSS','DOMQuery','Event'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={expand:function(m){var n=m.expander,o=m.menu,p=m.foldedClass,q=m.unfoldedClass,r=m.foldedItemClass,s=m.data;k.listen(n,'click',function(){i.toggleClass(o.getRoot(),p);i.toggleClass(o.getRoot(),q);var t=j.scry(o.getRoot(),'li.'+r);t.forEach(function(u){var v=u.getAttribute('data-feed-option-name');if(v)h.log('FeedStoryOptionMenuLoggerConfig',{option_name:v,is_secondary:1,event_type:'imp',feed_location:s.location,session_id:s.session_id,is_sponsored:s.is_sponsored,is_self_story:s.is_self_story});},this);});}};f.exports=l;},null);