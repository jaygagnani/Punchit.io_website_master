/*!CK:3747248683!*//*1440469865,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["dZ3K5"]); }

__d('InlinePostEditor',['Event','Arbiter','ReactDOM','Button','CSS','DOM','DOMClone','HTML','Input','Parent','TextAreaControl','csx','htmlize','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();function v(w,x,y){'use strict';this.$InlinePostEditor1=w;this.$InlinePostEditor2=x;this.$InlinePostEditor3=y;}v.prototype.init=function(){'use strict';this.$InlinePostEditor4=q.byClass(this.$InlinePostEditor2,'userContentWrapper');this.$InlinePostEditor5=m.find(this.$InlinePostEditor4,'.userContent');this.$InlinePostEditor6=m.scry(this.$InlinePostEditor4,'.userContentSecondary')[0];var w=m.find(this.$InlinePostEditor2,"._3oc"),x=m.find(this.$InlinePostEditor2,'form');this.$InlinePostEditor7=m.find(this.$InlinePostEditor2,'textarea');r.getInstance(this.$InlinePostEditor7);this.$InlinePostEditor7.focus();var y=this.$InlinePostEditor7.value.length;this.$InlinePostEditor7.setSelectionRange(y,y);u([h.listen(this.$InlinePostEditor7,'keyup',this.$InlinePostEditor8.bind(this)),h.listen(this.$InlinePostEditor7,'change',this.$InlinePostEditor8.bind(this)),h.listen(m.find(this.$InlinePostEditor2,"._3gs"),'click',this.$InlinePostEditor9.bind(this)),h.listen(x,'submit',this.$InlinePostEditor10.bind(this)),h.listen(x,'success',this.$InlinePostEditor11.bind(this))]);l.hide(this.$InlinePostEditor5);if(this.$InlinePostEditor6){m.appendContent(w,n.deepClone(this.$InlinePostEditor6));l.hide(this.$InlinePostEditor6);}else m.remove(w);};v.prototype.getEditComponent=function(){'use strict';return this.$InlinePostEditor2;};v.prototype.$InlinePostEditor12=function(w){'use strict';var x=this.$InlinePostEditor6&&m.contains(this.$InlinePostEditor5,this.$InlinePostEditor6);m.setContent(this.$InlinePostEditor5,w);if(x)m.appendContent(this.$InlinePostEditor5,this.$InlinePostEditor6);};v.prototype.$InlinePostEditor13=function(){'use strict';l.show(this.$InlinePostEditor5);this.$InlinePostEditor6&&l.show(this.$InlinePostEditor6);};v.prototype.$InlinePostEditor14=function(){'use strict';this.$InlinePostEditor13();m.remove(this.$InlinePostEditor2);};v.prototype.$InlinePostEditor11=function(event){'use strict';var w=this.$InlinePostEditor4&&m.scry(this.$InlinePostEditor4,'.UFIContainer')[0];if(w)j.unmountComponentAtNode(w);};v.prototype.$InlinePostEditor10=function(event){'use strict';var w=p.getValue(this.$InlinePostEditor7);i.inform('postcontent/change',{post_id:this.$InlinePostEditor1,content:w});this.$InlinePostEditor12(o(t(w)));this.$InlinePostEditor14();};v.prototype.$InlinePostEditor9=function(event){'use strict';this.$InlinePostEditor14();event.kill();};v.prototype.$InlinePostEditor8=function(){'use strict';var w=m.scry(this.$InlinePostEditor2,"._5281")[0],x=m.scry(this.$InlinePostEditor2,"._5282")[0],y=null;if(w)y=m.find(w,'input');var z=!p.isEmpty(this.$InlinePostEditor7),aa=z||this.$InlinePostEditor3;if(w){k.setEnabled(w,aa);k.setEnabled(y,aa);}x&&k.setEnabled(x,aa);};f.exports=v;},null);
__d('PostEdit',['$','csx','DOM','Parent'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={insertEntStoryEditor:function(m,n,o){var p=h(m),q=j.find(p,'.userContent');if(l.hasExistingEditor(p))return;j.insertBefore(q,n);o.init();},insertStreamEditor:function(m,n,o){var p=j.find(h(m),'.userContent'),q=k.byClass(p,'storyContent');if(l.hasExistingEditor(q))return;j.insertBefore(p,n);o.init();},insertTimelineEditor:function(m,n,o){var p=j.find(h(m),'.userContent'),q=k.byClass(p,'timelineUnitContainer');if(l.hasExistingEditor(q))return;j.insertBefore(p,n);o.init();},hasExistingEditor:function(m){var n=j.scry(m,"._3gr");return n.length>0;}};f.exports=l;},null);